{% extends "base.html" %}

{% block content %}
<main>

  <section class="section auth-page auth-reset">
    <style>
      .auth-reset .auth-card {
        animation: auth-shell-reset 0.85s ease-out;
      }

      @keyframes auth-shell-reset {
        0% { opacity: 0; transform: translateY(28px) scale(0.97); }
        60% { opacity: 1; transform: translateY(-3px) scale(1.01); }
        100% { opacity: 1; transform: translateY(0) scale(1); }
      }

      .auth-reset-note {
        font-size: 12px;
        color: #6b5a48;
        margin-bottom: 14px;
      }
    </style>

    <div class="auth-shell">
      <div class="auth-card">
        <div class="auth-header">
          <div class="auth-kicker">CHOOSE A NEW PASSWORD</div>
          <h1 class="auth-title">Reset your password</h1>
          <p class="auth-sub">
            Create a new password for your Adivasi Store account. Try something easy to remember and hard to guess.
          </p>
        </div>

        <!-- Usually you'll pass a token in the URL: /reset/<token> -->
        <form class="auth-form" method="POST" action="{{ url_for('reset_password') }}">
          <div class="auth-reset-note">
            Your reset link is active only for a limited time. Once you’re done, you’ll be logged in automatically.
          </div>

          <div class="auth-field">
            <label class="auth-label" for="reset-password">New password</label>
            <div class="auth-input-wrap">
              <input id="reset-password" name="password" type="password" class="auth-input auth-password-input" placeholder="New password" required>
              <button class="auth-toggle-pass" type="button" data-target="reset-password">SHOW</button>
            </div>
          </div>

          <div class="auth-field">
            <label class="auth-label" for="reset-confirm">Confirm new password</label>
            <div class="auth-input-wrap">
              <input id="reset-confirm" name="confirm_password" type="password" class="auth-input auth-password-input" placeholder="Repeat new password" required>
              <button class="auth-toggle-pass" type="button" data-target="reset-confirm">SHOW</button>
            </div>
          </div>

          <button type="submit" class="auth-submit" style="margin-top:10px;">Save new password</button>

          <div class="auth-meta-row">
            Back to
            <a href="{{ url_for('login') }}">Login</a>
          </div>
        </form>
      </div>
    </div>
  </section>

  <script>
    (function () {
      // Toggle password visibility
      document.querySelectorAll(".auth-toggle-pass").forEach(btn => {
        btn.addEventListener("click", () => {
          const targetId = btn.getAttribute("data-target");
          const input = document.getElementById(targetId);
          if (!input) return;
          const isPassword = input.type === "password";
          input.type = isPassword ? "text" : "password";
          btn.textContent = isPassword ? "HIDE" : "SHOW";
        });
      });
    })();
  </script>

</main>
{% endblock %}
